// Module included in the following assemblies:
// * serverless-logic/serverless-logic-managing-events/serverless-logic-configuring-asyncapi

:_mod-docs-content-type: PROCEDURE
[id="serverless-logic-asyncapi-publishing-event_{context}"]
= Publishing an event

To enable seamless publication of events, define the HTTP server, publishing channel, and a function that sends the event, and then invoke the function in your workflow. When your workflow reaches the function, it sends the event with the necessary payload to the HTTP server.

.Prerequisites
* You have access to an {ServerlessLogicProductName} project with the appropriate roles and permissions to create applications and other workloads in {ocp-product-title}.
* You have created the `asyncAPI.yaml` file your project `classpath`.
* An HTTP server is running and accessible at the defined URL.
* Your project includes the necessary dependencies for AsyncAPI and HTTP communication.

.Procedure

. Define the HTTP Server in your `asyncAPI.yaml` file.
+
The following example defines an HTTP server:
+
[source,yaml]
----
servers:
 development:
   url: localhost:8080
   description: Development server
   protocol: http
   protocolVersion: '1.0.0'
----

. Create a publishing channel in your `asyncAPI.yaml` file.
+
The following example defines a publishing channel definition named `resume`:
+
[source,yaml]
----
channels:
 resume:
   description: A message channel
   publish:
     operationId: sendResume
     summary: Send messages
     message:
       $ref: '#/components/messages/message'
----

. Add a function in your workflow that uses the `asyncapi` type and points to the `sendResume` operation Id.
+
The following example shows function definition:
+
[source,json]
----
{
 "functions": [
   {
     "name": "sendResume",
     "type": "asyncapi",
     "operation": "asyncAPI.yaml#sendResume"
   }
 ]
}
----
+
[NOTE]
====
The `operation` property supports `http`, `https`, and `file` schemas for the URI. If no schema is specified, it assumes the file is on the project `classpath`.
====

. Invoke the function in an operation state.
+
In your workflow, invoke the `sendResume` function within an operation state as defined in the following example:
+
[source,json]
----
{
 "states": [
   {
     "name": "sendEvent",
     "type": "operation",
     "actions": [
       {
         "functionRef": "sendResume",
         "arguments": {
           "name": "Javierito"
         }
       }
     ]
   }
 ]
}
----

. Execute the workflow.
+
When the workflow reaches the `sendEvent` state, it sends an event to the endpoint `\localhost:8080/resume` with the payload {`"name":"Javierito"`}.
