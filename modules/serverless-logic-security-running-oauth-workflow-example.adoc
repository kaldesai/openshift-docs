// Module included in the following assemblies:
// * serverless-logic/serverless-logic-managing-security


:_mod-docs-content-type: PROCEDURE
[id="serverless-logic-security-running-oauth-workflow-example_{context}"]
= Running the OAuth2 orchestration workflow example locally

The `serverless-workflow-oauth2-orchestration-quarkus` example application provides a hands-on demonstration of orchestrating a third-party secured service using a {ServerlessLogicProductName} workflow. You can clone, build, and run this example locally to observe OAuth 2.0 authentication, service orchestration, and workflow execution in action.

.Prerequisites

* You have installed Java 17 or later.
* You have installed Apache Maven 3.9.3 or later.
* You have installed Docker 20.10.7 or later.

.Procedure

. Clone the `kogito-examples` GitHub repository by using the following command:
+
[source,terminal]
----
$ git clone https://github.com/kiegroup/kogito-examples.git
----

. Navigate to the example application directory by using the following command:
+
[source,terminal]
----
$ cd kogito-examples/serverless-workflow-examples/serverless-workflow-oauth2-orchestration-quarkus
----

. Build the example application by using the following command:
+
[source,terminal]
----
$ mvn clean install
----

. Start the Keycloak OAuth 2.0 server by using the following command:
+
[source,terminal]
----
$ cd {kie_kogito_examples_repo_name}/serverless-workflow-examples/serverless-workflow-oauth2-orchestration-quarkus/scripts
----
+
[source,terminal]
----
$ ./startKeycloak.sh
----

. Start the Acme Financial Service application by using the following commands:
+
[source,terminal]
----
$ cd {kie_kogito_examples_repo_name}/serverless-workflow-examples/serverless-workflow-oauth2-orchestration-quarkus/acme-financial-service
----
+
[source,terminal]
----
$ jar target/quarkus-app/quarkus-run.jar
----
+
This service provides exchange rate data secured with OAuth 2.0.

. Start the Currency Exchange workflow application.
+
[source,terminal]
----
$ cd {kie_kogito_examples_repo_name}/serverless-workflow-examples/serverless-workflow-oauth2-orchestration-quarkus/currency-exchange-workflow
----
+
[source,terminal]
----
$ jar target/quarkus-app/quarkus-run.jar
----
+
This service runs the currency exchange workflow that orchestrates the secured Acme Financial Service.

.Verification

* After all services are running, you can test the workflow by sending a POST request using the following example `curl` command:
+
.Example request 
[source,terminal]
----
curl -X 'POST' \
  'http://localhost:8080/currency_exchange_workflow' \
  -H 'accept: */*' \
  -H 'Content-Type: application/json' \
  -d '{
       "currencyFrom": "EUR",
       "currencyTo": "USD",
       "exchangeDate": "2022-06-10",
       "amount": 2.0
    }'
----
+
.Example response 
[source,terminal]
----
{
  "id": "399ce304-037c-486d-b4bf-1564baf907a1",
  "workflowdata": {
    "currencyFrom": "EUR",
    "currencyTo": "USD",
    "exchangeDate": "2022-06-10",
    "amount": 2.0,
    "executionStatus": "OK",
    "executionStatusMessage": "Execution successful",
    "exchangeRate": 1.0578,
    "result": 2.1156
  }
}
----
